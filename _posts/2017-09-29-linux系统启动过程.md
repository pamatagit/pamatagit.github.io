## 系统启动过程

### 1.POST开机自检

电脑主机打开电源的时候，随后会听到滴的一声，系统启动开始了开机自检（POST-power on self test）自检开始），这个过程中主要是检测计算机硬件设备比如：CPU，内存，主板，显卡，CMOS等设备是否有故障存在，如果有硬件故障的话将按两种情况理：对于严重故障(致命性故障)则停机，此时由于各种初始化操作还没完成，不能给出任何提示或信号；对于非严重故障则给出提示或声音报警信号，等待用户处理），如果没有故障，POST完整自己的接力任务，将尾部工作交接给BIOS处理。

### 2.BIOS启动

计算机加电自检完成后第一个读取的地方就是就是BIOS（Basic Input Output System，基础输入输出系统），BIOS里面记录了主机板的芯片集与相关设置，如CPU与接口设备的通信频率、启动设备的搜索顺序、硬盘的大小与类型、系统时间、外部总线、各种接口设备的I/O地址、已经与CPU通信的IRQ中断信息，所以，启动如果要顺利启动，首先要读取BIOS设置。 

### 3.读取MBR

按照BIOS所设定的系统启动流程，如果检测通过，则根据引导次序(Boot Sequence)开始在第一台设备上支持启动程序，我们的启动设备主要包括硬盘、USB、SD等，我们一般用的是硬盘，然后进行读取第一个设备就是硬盘，第一个要读去的就是该硬盘的主引导记录MBR（Master Boot Record），然后系统可以根据启动区安装的引导加载程序（Boot Loader）开始执行核心识别的工作。【在此插一句：MBR程序只是找到只是硬盘分区内最前面的446个字节的Boot Loader】然后查找相关配置和定义。 

### 4.Boot Loader启动

linux的Boot Loader是Grub，Grub启动后根据gurb.cfg的配置加载内核

### 5.加载Kernel

 根据Grub内的定义，grub读取完毕后就把下面的工作交个内核了。kernel主要是完成系统硬件探测及硬件驱动的初始化，并且以读写的方式挂载根文件系统（根切换），那么这里就出现了一个“先有鸡还是先有蛋的文件了”，具体是什么那？   

 要想访问真正的根文件系统（rootfs）的话，就必须加载根文件系统中的设备，这时根文件系统又没有挂载，要挂载根文件系统又得加载根文件系统中的驱动程序，哪怎么办呢？为了解决这个问题，这是就用到了initrd文件了。 在来说下kernel初始化所要工作的内容做下简单总结：

探测硬件->加载驱动（initrd)->挂载根文件系统->rootfs(/sbin/init) 

### 6.加载initrd，挂载rootfs

到此止内核空间的相关工作已经完成，内核空间的任务开始向用户空间转移，内核空间通过一个间接的initrd(微型linux)向用户空间的/sbin/init过度，所以gurb开始引导内核转向initrd。 

initrd：一个虚拟的文件系统，里面有lib、bin、sbin、usr、proc、sys、var、dev、boot等一些目录，其实你会发现里面的目录有点像真的/对吧，所以我们称之为虚拟的根文件系统，作用就是将kernel和真的根文件系统建立关联关系，让kernel去initrd中加载根文件系统所需要的驱动程序，并以读写的方式挂载根文件系统，并让执行用户当中第一个进程init。

### 7.系统初始化

init执行完毕以后会启动系统内的/etc/inittab文件，来完成系统系统的初始化工作。

### 8.启动系统各项服务

